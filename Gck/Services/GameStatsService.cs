namespace Gck.Services;

public class GameStatsService
{
    private readonly HttpClient _httpClient;
    
    public GameStatsService(HttpClient httpClient)
    {
        _httpClient = httpClient;
    }

    public async Task<GameStats> GetUserStatsAsync(string userId)
    {
        // Simulate API call - replace with actual API endpoint
        await Task.Delay(500);
        
        return new GameStats
        {
            TotalScore = 56240,
            GamesPlayed = 165,
            GamesWon = 128,
            WinPercentage = 77,
            Rank = 7,
            WeeklyScore = 12345,
            FavoriteGame = "???? ?????"
        };
    }

    public async Task<List<LeaderboardEntry>> GetLeaderboardAsync(int page = 1, int pageSize = 10)
    {
        // Simulate API call
        await Task.Delay(300);
        
        return new List<LeaderboardEntry>
        {
            new() { Rank = 1, PlayerName = "???? ?????", Username = "@mohammad_pro", Score = 123456, GamesPlayed = 287, GamesWon = 234, WinPercentage = 82, Avatar = "gradient-1" },
            new() { Rank = 2, PlayerName = "??? ?????", Username = "@alirezaei_gamer", Score = 85240, GamesPlayed = 203, GamesWon = 165, WinPercentage = 81, Avatar = "gradient-2" },
            new() { Rank = 3, PlayerName = "????? ?????", Username = "@fateme_gamer", Score = 72890, GamesPlayed = 198, GamesWon = 154, WinPercentage = 78, Avatar = "gradient-3" },
            new() { Rank = 4, PlayerName = "??? ?????", Username = "@reza_pro_gamer", Score = 68120, GamesPlayed = 243, GamesWon = 198, WinPercentage = 81, Avatar = "gradient-1" },
            new() { Rank = 5, PlayerName = "???? ?????", Username = "@sara_champion", Score = 65430, GamesPlayed = 209, GamesWon = 172, WinPercentage = 82, Avatar = "gradient-2" },
        };
    }

    public async Task<List<GameInfo>> GetPopularGamesAsync()
    {
        await Task.Delay(200);
        
        return new List<GameInfo>
        {
            new() { Id = 1, Title = "???? ?????", Description = "?? ??? ???? ???????????? ?????? ?? ?? ???? ???????? ???? ????", Icon = "fas fa-rocket", Tags = new[] { "????", "?????", "???????" }, Rating = 4.8, OnlinePlayers = 125, IsNew = true },
            new() { Id = 2, Title = "????? ?????????", Description = "????????? ????????? ??? ?? ?? ?????? ???????? ???? ?? ?????? ???????", Icon = "fas fa-chess", Tags = new[] { "????????", "????", "??????" }, Rating = 4.5, OnlinePlayers = 89, IsPopular = true },
            new() { Id = 3, Title = "?????? ????", Description = "?? ???????? ??????????? ??????? ???? ? ????????? ?????? ????!", Icon = "fas fa-car", Tags = new[] { "?????????", "????", "??????" }, Rating = 4.9, OnlinePlayers = 203 },
            new() { Id = 4, Title = "???? ?????????", Description = "??? ??? ?? ?? ???????? ???? ??????????? ? ??????? ?????? ??? ????", Icon = "fas fa-puzzle-piece", Tags = new[] { "????", "????", "?????????" }, Rating = 4.3, OnlinePlayers = 56 },
            new() { Id = 5, Title = "?????? ??????", Description = "?? ?????? ??? ??? ????? ???? ? ?? ??? ?????? ?????? ????", Icon = "fas fa-football-ball", Tags = new[] { "?????", "????", "??????" }, Rating = 4.7, OnlinePlayers = 189 },
            new() { Id = 6, Title = "?????? ?????????", Description = "?? ????? ???? ? ????? ??? ???? ? ?? ???????? ?????? ?????? ?? ???? ????", Icon = "fas fa-magic", Tags = new[] { "RPG", "??????", "?????????" }, Rating = 4.6, OnlinePlayers = 97 }
        };
    }
}

public class GameStats
{
    public int TotalScore { get; set; }
    public int GamesPlayed { get; set; }
    public int GamesWon { get; set; }
    public int WinPercentage { get; set; }
    public int Rank { get; set; }
    public int WeeklyScore { get; set; }
    public string FavoriteGame { get; set; } = string.Empty;
}

public class LeaderboardEntry
{
    public int Rank { get; set; }
    public string PlayerName { get; set; } = string.Empty;
    public string Username { get; set; } = string.Empty;
    public int Score { get; set; }
    public int GamesPlayed { get; set; }
    public int GamesWon { get; set; }
    public int WinPercentage { get; set; }
    public string Avatar { get; set; } = string.Empty;
}

public class GameInfo
{
    public int Id { get; set; }
    public string Title { get; set; } = string.Empty;
    public string Description { get; set; } = string.Empty;
    public string Icon { get; set; } = string.Empty;
    public string[] Tags { get; set; } = Array.Empty<string>();
    public double Rating { get; set; }
    public int OnlinePlayers { get; set; }
    public bool IsNew { get; set; }
    public bool IsPopular { get; set; }
    public string Url => $"/games/{Title.Replace(" ", "-").ToLower()}";
    public string BackgroundGradient => $"var(--gradient-{(Id % 3) + 1})";
}